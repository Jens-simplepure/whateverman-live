{% comment %}
  CHNGE Style Filter Drawer
{% endcomment %}

<div id="FilterDrawer" class="filter-drawer" aria-hidden="true">
  <div class="filter-drawer__overlay" onclick="closeFilterDrawer()"></div>
  <div class="filter-drawer__content">
    
    <div class="filter-drawer__header">
      <h2 class="filter-drawer__title">FILTERS <span style="color:#999; margin-left:5px;">[{{ results.products_count }}]</span></h2>
      <button type="button" class="filter-drawer__close" onclick="closeFilterDrawer()">âœ•</button>
    </div>

    <form class="filter-drawer__form" id="FacetFiltersForm">
      {%- if results.terms -%}
        <input type="hidden" name="q" value="{{ results.terms | escape }}">
      {%- endif -%}

      <div class="filter-drawer__accordion-list">
        {%- for filter in results.filters -%}
          <div class="filter-group">
            <div class="filter-group__summary">
              <span>{{ filter.label }}</span>
            </div>
            
            <div class="filter-group__display">
              {%- case filter.type -%}
                {%- when 'boolean' or 'list' -%}
                  <ul class="filter-list {% if filter.label == 'Color' or filter.label == 'Farbe' %}filter-list--swatch{% else %}filter-list--chips{% endif %}">
                    {%- for value in filter.values -%}
                      <li class="filter-item">
                        <label class="filter-chip {% if value.active %}is-active{% endif %} {% if value.count == 0 and value.active == false %}is-disabled{% endif %}">
                          <input type="checkbox"
                            name="{{ value.param_name }}"
                            value="{{ value.value }}"
                            {% if value.active %}checked{% endif %}
                            {% if value.count == 0 and value.active == false %}disabled{% endif %}
                            class="visually-hidden"
                            onchange="this.closest('form').submit()"
                          >
                          {{ value.label }}
                        </label>
                      </li>
                    {%- endfor -%}
                  </ul>

                {%- when 'price_range' -%}
                  <div class="filter-price-group">
                    <div class="field">
                      <span>{{ cart.currency.symbol }}</span>
                      <input class="field__input"
                        name="{{ filter.min_value.param_name }}"
                        type="number"
                        placeholder="0"
                        min="0"
                        max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                        {% if filter.min_value.value %}value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"{% endif %}
                      >
                    </div>
                    <span>-</span>
                    <div class="field">
                      <span>{{ cart.currency.symbol }}</span>
                      <input class="field__input"
                        name="{{ filter.max_value.param_name }}"
                        type="number"
                        min="0"
                        max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                        {% if filter.max_value.value %}value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"{% endif %}
                      >
                    </div>
                    <button type="submit" class="btn-filter-go">GO</button>
                  </div>
              {%- endcase -%}
            </div>
          </div>
        {%- endfor -%}
      </div>

      <div class="filter-drawer__footer">
        <a href="{{ results.url }}?sort_by={{ results.sort_by }}" class="btn btn-outline btn-full">CLEAR ALL</a>
        <button type="button" class="btn btn-primary btn-full" onclick="closeFilterDrawer()">VIEW RESULTS</button>
      </div>
    </form>
  </div>
</div>

<script>
  function openFilterDrawer() {
    document.getElementById('FilterDrawer').classList.add('is-open');
    document.body.style.overflow = 'hidden';
  }
  function closeFilterDrawer() {
    document.getElementById('FilterDrawer').classList.remove('is-open');
    document.body.style.overflow = '';
  }
</script>