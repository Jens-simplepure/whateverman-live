{%- style -%}
  .site-header {
    position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
    background: var(--color-background);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }
  .site-header.is-scrolled {
    background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px);
  }
  
  .header__wrapper {
    display: flex; align-items: center; 
    /* WICHTIG: Logo Links, Rest folgt */
    justify-content: flex-start; 
    height: var(--header-height, 90px);
    padding: 0 var(--site-padding, 40px);
    max-width: 100%; margin: 0 auto;
    position: relative;
  }

  /* LOGO Styles inline für Stabilität */
  .header__logo {
    display: flex; align-items: center;
    margin-right: 3rem; /* Abstand zur Navi */
    z-index: 20;
    flex-shrink: 0;
  }
  .header__logo img {
    width: auto; height: auto;
    max-width: {{ settings.logo_width }}px;
    max-height: 60px; /* Damit der Header nicht explodiert */
    object-fit: contain;
  }

  /* Icons rechts pushen */
  .header__icons { margin-left: auto; display: flex; align-items: center; gap: 1rem; }
  
  /* Mobile Toggle */
  .header__mobile-toggle { display: none; background: none; border: none; cursor: pointer; }
  @media (max-width: 1024px) {
    .header__mobile-toggle { display: block; padding: 10px; }
    .header__nav { display: none; }
    .header__icons { gap: 0.5rem; }
  }
{%- endstyle -%}

<header class="site-header" data-sticky="{{ settings.header_sticky }}">
  <div class="header__wrapper">
    
    <div class="header__logo">
      <a href="/" class="header__logo-link">
        {% if settings.logo != blank %}
          <img 
            src="{{ settings.logo | image_url: width: settings.logo_width }}" 
            alt="{{ shop.name }}"
            width="{{ settings.logo_width }}"
            height="{{ settings.logo_width | divided_by: settings.logo.aspect_ratio | round }}"
            loading="eager"
          >
        {% else %}
          <span style="font-family:'Bebas Neue'; font-size:2rem; color:#fff; white-space:nowrap;">{{ shop.name }}</span>
        {% endif %}
      </a>
    </div>
    
    <nav class="header__nav header__nav--left" style="display:flex; height:100%;">
      {% render 'site-nav', linklist: linklists.main-menu, position: 'left' %}
    </nav>
    
    <div class="header__icons">
      <nav class="header__nav header__nav--right" style="display:flex; margin-right:1rem;">
        {% render 'site-nav', linklist: linklists.main-menu, position: 'right' %}
      </nav>
      
      <a href="{{ routes.search_url }}" class="header__text-link" aria-label="Search">
        {{ 'general.header.search' | t }}
      </a>
      
      <a href="{{ routes.account_url }}" class="header__text-link" aria-label="Login">
        {{ 'general.header.login' | t }}
      </a>
      
      <a href="{{ routes.cart_url }}" class="header__text-link header__text-link--bag" data-cart-drawer-open aria-label="Bag">
        {{ 'general.header.bag' | t }}
        <span class="header__cart-count">{{ cart.item_count }}</span>
      </a>
      
      <button class="header__mobile-toggle" data-mobile-menu-toggle>
        <span style="display:block; width:24px; height:2px; background:#fff; margin:5px 0;"></span>
        <span style="display:block; width:24px; height:2px; background:#fff; margin:5px 0;"></span>
      </button>
    </div>

  </div>
</header>

{% schema %}
{
  "name": "Header",
  "class": "section-header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 5,
      "unit": "px",
      "label": "Logo Width",
      "default": 120
    }
  ]
}
{% endschema %}