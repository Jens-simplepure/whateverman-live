{%- style -%}
  .search-page {
    min-height: 100vh;
    background: var(--color-background);
    padding-top: 2rem;
  }
  
  .search-page__wrapper {
    max-width: var(--container-width);
    margin: 0 auto;
    padding: 0 2rem;
  }
  
  .search-page__header {
    margin-bottom: 3rem;
  }
  
  .search-page__form {
    display: flex;
    align-items: center;
    gap: 1rem;
    border-bottom: 2px solid var(--color-text);
    padding-bottom: 1rem;
    margin-bottom: 2rem;
  }
  
  .search-page__icon {
    width: 24px;
    height: 24px;
    color: var(--color-text-muted);
    flex-shrink: 0;
  }
  
  .search-page__input {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    font-size: 1.5rem;
    font-family: var(--font-heading);
    color: var(--color-text);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .search-page__input::placeholder {
    color: var(--color-text-muted);
  }
  
  .search-page__input:focus {
    outline: none;
  }
  
  .search-page__clear {
    background: transparent;
    border: none;
    color: var(--color-text-muted);
    cursor: pointer;
    padding: 0.5rem;
    display: none;
    transition: color 0.2s ease;
  }
  
  .search-page__clear:hover {
    color: var(--color-text);
  }
  
  .search-page__clear.is-visible {
    display: block;
  }
  
  .search-page__trending {
    margin-top: 2rem;
  }
  
  .search-page__trending-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }
  
  .search-page__trending-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .search-page__trending-item {
    margin-bottom: 0.75rem;
  }
  
  .search-page__trending-link {
    color: var(--color-text-muted);
    font-size: 1rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }
  
  .search-page__trending-link:hover {
    color: var(--color-text);
  }
  
  .search-page__results {
    margin-top: 3rem;
  }
  
  .search-page__results-count {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-bottom: 2rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .search-page__grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(2, 1fr);
  }
  
  @media (min-width: 768px) {
    .search-page__input {
      font-size: 2rem;
    }
    
    .search-page__grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  @media (min-width: 1024px) {
    .search-page__grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  
  .search-page__no-results {
    text-align: center;
    padding: 4rem 2rem;
  }
  
  .search-page__no-results-title {
    font-size: 1.5rem;
    font-family: var(--font-heading);
    text-transform: uppercase;
    margin-bottom: 1rem;
  }
  
  .search-page__no-results-text {
    color: var(--color-text-muted);
    margin-bottom: 2rem;
  }
  
  .search-page__pagination {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 3rem;
  }
  
  .search-page__pagination-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--color-text);
    font-size: 0.875rem;
    transition: all 0.3s ease;
  }
  
  .search-page__pagination-link:hover,
  .search-page__pagination-link.is-current {
    border-color: var(--color-primary);
    background: var(--color-primary);
    color: var(--color-background);
  }
{%- endstyle -%}

<section class="search-page">
  <div class="search-page__wrapper">
    <div class="search-page__header">
      <form action="{{ routes.search_url }}" method="get" class="search-page__form" role="search">
        <svg class="search-page__icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input 
          type="search" 
          name="q" 
          id="search-input"
          class="search-page__input" 
          placeholder="Search for products"
          value="{{ search.terms | escape }}"
          autocomplete="off"
          autofocus
        >
        <button type="button" class="search-page__clear {% if search.terms != blank %}is-visible{% endif %}" aria-label="Clear search" data-search-clear>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </form>
      
      {% if search.performed == false or search.terms == blank %}
        <div class="search-page__trending">
          <h2 class="search-page__trending-title">Trending searches</h2>
          <ul class="search-page__trending-list">
            {% for term in section.settings.trending_searches %}
              {% if term != blank %}
                <li class="search-page__trending-item">
                  <a href="{{ routes.search_url }}?q={{ term | url_encode }}" class="search-page__trending-link">{{ term }}</a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    </div>
    
    {% if search.performed %}
      <div class="search-page__results">
        {% if search.results_count > 0 %}
          <p class="search-page__results-count">
            {{ search.results_count }} {{ search.results_count | pluralize: 'result', 'results' }} for "{{ search.terms }}"
          </p>
          
          {% paginate search.results by 12 %}
            <div class="search-page__grid">
              {% for item in search.results %}
                {% if item.object_type == 'product' %}
                  {% render 'product-card', product: item %}
                {% endif %}
              {% endfor %}
            </div>
            
            {% if paginate.pages > 1 %}
              <nav class="search-page__pagination">
                {% if paginate.previous %}
                  <a href="{{ paginate.previous.url }}" class="search-page__pagination-link">←</a>
                {% endif %}
                
                {% for part in paginate.parts %}
                  {% if part.is_link %}
                    <a href="{{ part.url }}" class="search-page__pagination-link">{{ part.title }}</a>
                  {% else %}
                    <span class="search-page__pagination-link is-current">{{ part.title }}</span>
                  {% endif %}
                {% endfor %}
                
                {% if paginate.next %}
                  <a href="{{ paginate.next.url }}" class="search-page__pagination-link">→</a>
                {% endif %}
              </nav>
            {% endif %}
          {% endpaginate %}
        {% else %}
          <div class="search-page__no-results">
            <h2 class="search-page__no-results-title">No results found</h2>
            <p class="search-page__no-results-text">
              We couldn't find anything for "{{ search.terms }}". Try checking your spelling or using different keywords.
            </p>
          </div>
        {% endif %}
      </div>
    {% endif %}
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const input = document.getElementById('search-input');
    const clearBtn = document.querySelector('[data-search-clear]');
    
    if (input && clearBtn) {
      input.addEventListener('input', function() {
        if (this.value.length > 0) {
          clearBtn.classList.add('is-visible');
        } else {
          clearBtn.classList.remove('is-visible');
        }
      });
      
      clearBtn.addEventListener('click', function() {
        input.value = '';
        input.focus();
        this.classList.remove('is-visible');
      });
    }
  });
</script>

{% schema %}
{
  "name": "Search Page",
  "class": "section-search",
  "settings": [
    {
      "type": "header",
      "content": "Trending Searches"
    },
    {
      "type": "text",
      "id": "trending_searches",
      "label": "Trending search terms",
      "info": "Separate terms with commas (e.g., jacket, pants, hoodie)"
    }
  ],
  "presets": [
    {
      "name": "Search Page"
    }
  ]
}
{% endschema %}