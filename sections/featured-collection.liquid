{{ 'base.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-featured-collection {
    padding: 3rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }

  .section-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .section-heading {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(2rem, 5vw, 3.5rem);
    text-transform: uppercase;
    margin: 0;
    color: #fff;
    line-height: 1;
  }
  
  /* Optional: Highlight Farbe für einen Teil des Titels wenn gewünscht */
  .section-heading span {
    color: var(--color-primary);
  }

  /* CHNGE Style Pill Button für "View All" */
  .view-all-btn {
    appearance: none;
    background-color: #333333;
    color: #ffffff;
    text-decoration: none;
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-family: 'Inter', sans-serif;
    font-size: 0.95rem;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
  }
  .view-all-btn:hover {
    background-color: #444444;
    color: #fff;
  }
{%- endstyle -%}

<div class="section-featured-collection">
  <div class="container">
    
    <div class="section-header-row">
      <h2 class="section-heading">
        {{ section.settings.heading | default: "Featured Collection" }}
      </h2>
      
      {% if section.settings.collection != blank %}
        <a href="{{ collections[section.settings.collection].url }}" class="view-all-btn">
          View All
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" style="margin-left:8px;">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
      {% endif %}
    </div>

    <div class="grid grid-4">
      {%- assign collection = collections[section.settings.collection] -%}
      
      {% if collection != blank %}
        {% for product in collection.products limit: section.settings.products_to_show %}
          {% render 'product-card', product_card_product: product %}
        {% endfor %}
      {% else %}
        {% for i in (1..4) %}
          <div class="product-card">
            <div class="product-card__image" style="background: #222;">
              {{ 'product-' | append: i | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
            <div class="product-card__content">
              <h3 class="product-card__title">Example Product {{ i }}</h3>
              <div class="product-card__price"><span>$99.00</span></div>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>

  </div>
</div>

{% schema %}
{
  "name": "Featured Collection",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "Best Sellers",
      "label": "Heading"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_per_page",
      "min": 4,
      "max": 12,
      "step": 4,
      "default": 4,
      "label": "Products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Collection"
    }
  ]
}
{% endschema %}